<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click Game</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8044917366664475"
     crossorigin="anonymous">



     </script>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Orbitron', sans-serif;
    }

    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      display: flex;
      gap: 60px;
      align-items: center;
    }

    .center {
      text-align: center;
    }

    
    input {
      padding: 12px 20px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      margin-bottom: 20px;
      width: 250px;
    }

    button {
      background-color: #ff4136;
      border: none;
      padding: 30px 60px;
      font-size: 28px;
      border-radius: 50px;
      cursor: pointer;
      transition: 0.2s ease;
      color: #fff;
    }

    button:hover {
      background-color: #ff6f61;
      transform: scale(1.05);
    }

    .leaderboard {
      background-color: #111;
      padding: 20px;
      border-radius: 20px;
      max-height: 500px;
      overflow-y: auto;
    }

    .leaderboard h2 {
      text-align: center;
      color: gold;
      margin-bottom: 15px;
    }

    .leaderboard-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #444;
    }

    .simple-name {
  font-family: Arial, sans-serif;
}

    .trophy {
      width: 24px;
      margin-right: 10px;
    }
     .visitor-count {
      position: fixed;
      bottom: 10px;
      right: 10px;
    }





    
  </style>
</head>
<body>
  <div class="container">
    <div class="center">
      <input type="text" id="nameInput" placeholder="Enter your name">
      <br>
      <button onclick="handleClick()">üî• CLICK üî•</button>
    </div>

    <div class="leaderboard">
      <h2>üèÜ Leaderboard</h2>
      <div id="leaderboardList"></div>
    </div>
  </div>

 <div class="visitor-count">
    <img src="https://visitor-badge.laobi.icu/badge?page_id=click_champ_thequiettech" alt="Visitor count">
  </div>

  <script>
    const SUPABASE_URL = 'https://baprqufrtxmjtwlzamiv.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhcHJxdWZydHhtanR3bHphbWl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMzUxNzYsImV4cCI6MjA2ODkxMTE3Nn0.BlE2mzVUbAkFM1jsU6mLK-LhLlPZmEVv6Snc0Zd8Dto'; // Truncated for safety
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    async function handleClick() {
      const name = document.getElementById('nameInput').value.trim();
      if (!name) {
        alert("Please enter your name!");
        return;
      }

      let { data: existing, error: fetchError } = await supabase
        .from('clicks')
        .select('*')
        .eq('name', name)
        .single();

      if (fetchError || !existing) {
        await supabase.from('clicks').insert([{ name: name, clicks: 1 }]);
      } else {
        await supabase
          .from('clicks')
          .update({ clicks: existing.clicks + 1 })
          .eq('id', existing.id);
      }

      loadLeaderboard();
    }

    async function loadLeaderboard() {
      const { data, error } = await supabase
        .from('clicks')
        .select('*')
        .order('clicks', { ascending: false })
        .limit(10);

      const leaderboardDiv = document.getElementById('leaderboardList');
      leaderboardDiv.innerHTML = '';

      if (data) {
        data.forEach((entry, index) => {
          const item = document.createElement('div');
          item.className = 'leaderboard-item';

          const trophy = ['ü•á', 'ü•à', 'ü•â'][index] || 'üèÖ';

 

item.innerHTML = `
  <div>${trophy} <span class="simple-name">${entry.name}</span>&nbsp;&nbsp;</div>
  <div>${entry.clicks} clicks</div>
`;

          
          leaderboardDiv.appendChild(item);
        });
      }
    }

    loadLeaderboard();
    
  </script>

<script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

  const SUPABASE_URL = "https://baprqufrtxmjtwlzamiv.supabase.co"; // <-- replace with your project URL
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhcHJxdWZydHhtanR3bHphbWl2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMzUxNzYsImV4cCI6MjA2ODkxMTE3Nn0.BlE2mzVUbAkFM1jsU6mLK-LhLlPZmEVv6Snc0Zd8Dto"; // <-- replace with your anon key
  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  document.addEventListener("DOMContentLoaded", async () => {
    const userAgent = navigator.userAgent;

    try {
      const ipRes = await fetch("https://api64.ipify.org?format=json");
      const ipJson = await ipRes.json();
      const ip = ipJson.ip;

      if (!localStorage.getItem("hasVisited")) {
        await supabase.from("visitors")
          .insert([{ ip: ip, user_agent: userAgent }])
          .then(() => localStorage.setItem("hasVisited", "true"))
          .catch((err) => console.error("Insert error:", err));
      }
    } catch (err) {
      console.error("IP fetch failed:", err);
    }
  });
</script>


  
</body>
</html>
